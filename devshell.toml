# https://numtide.github.io/devshell
[[commands]]
package = "deploy-rs.deploy-rs"
name = "deploy"
category = "maintenance"
help = "deploy on (remote) hosts using deploy-rs"

[[commands]]
package = "ssh-to-pgp"
category = "maintenance"
help = "convert ssh keys to pgp, useful for sops-nix"

[[commands]]
package = "scripts"
name = "ara-remote-unlock"
category = "maintenance"
help = "unlock ara over ssh"

# [[commands]]
# package = "scripts"
# name = "nm-connection-sync"
# category = "maintenance"
# help = "synchronize networkmanager connection settings between system and repository"

[[commands]]
name = "fmt-nix"
command = "nixpkgs-fmt ${@} $DEVSHELL_ROOT"
category = "lint"
help = "format nix source files"

[[commands]]
name = "fmt-src"
command = "fmt-nix"
category = "lint"
help = "run all fmt tools"

[[commands]]
package = "editorconfig-checker"
category = "lint"
help = "check conformance with .editorconfig"

[[commands]]
name = "lint"
command = "fmt-nix --check; editorconfig-checker"
category = "lint"
help = "run all lint tools"

[devshell]
packages = [
  "git", "nixFlakes", "sops", "sops-import-keys-hook", "nixpkgs-fmt"
]
